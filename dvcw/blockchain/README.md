## Local Ethereum blockchain for DVCW

### Requirements
1. [NodeJS 8.1.15](https://nodejs.org) - Install it with NVM.
2. Truffle and ganache-cli: `npm i -g truffle@4.1.15 ganache-cli`
3. Run `nvm use 8.15.1`
4. Run `npm install and npm start in each directory (desktop-app, web-api) to run each of the services`

### 1. Start Ganache on port 8545
- Run `./start-ganache.sh`

Note that your local blockchain will be persisted in the `./bchain/prod` folder. Change that path in the `start-ganache.sh` script if you would like to persist it somewhere else.

> In case you want to drop the blockchain you are using and create a new one, just delete all files in the `./bchain/prod` folder with `rm bchain/prod/*` and run `./start-ganache.sh` again.

The accounts generated by Ganache should be:
- **(0) 0x627306090abab3a6e1400e9345bc60c78a8bef57**
- (1) 0xf17f52151ebef6c7334fad080c5704d77216b732
- (2) 0xc5fdf4076b8f3a5357c5e395ab970b5b54098fef
- (3) 0x821aea9a577a9b44299b9c15c88cf3087f3b5544
- (4) 0x0d1d4e623d10f9fba5db95830f7d3839406c6af2
- (5) 0x2932b7a2355d6fecc4b5c0b6bd44cc31df247a2e
- (6) 0x2191ef87e392377ec08e7c08eb105ef5448eced5
- (7) 0x0f4f2ac550a1b4e2280d04c21cea7ebd822934b5
- (8) 0x6330a553fc93768f612722bb8c2ec78ac90b3bbc
- (9) 0x5aeda56215b167893e80b4fe645ba6d5bab767de

The default account you will be using is **(0) 0x627306090abab3a6e1400e9345bc60c78a8bef57**.

The account (8) 0x6330a553fc93768f612722bb8c2ec78ac90b3bbc is the owner of the DVCToken.sol contract.

The account (9) 0x2932b7a2355d6fecc4b5c0b6bd44cc31df247a2e is the owner of the DVCTokenSale.sol contract (see `migrations/2_deploy_contracts.js`).

### 2. Compile and deploy contracts
- Run `./setup.sh`

*Note: This script will also launch a Python web server on port 8000 to make it possible to the API to get the addresses in which the smart contracts were deployed on the network*


### Other useful commands


#### To interact with Ganache's local blockchain
- Run `truffle console`
